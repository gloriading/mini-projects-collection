<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Gloria | Rock-Paper-Scissors</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

    <link rel="stylesheet" href="project-13.css">
  </head>
  <body>
    <nav>
      <a href="../index.html">Projects Home</a>
    </nav>
    <header>
      <h2>
        <span><i class="fas fa-hand-paper fa-2x"></i></span>
        Rock-Paper-Scissors
      </h2>
    </header>
    <main>
      <!-- 3 clickable options -->
      <div class="grid options">
        <div class="option" id="optionRock">
          <i class="far fa-hand-rock fa-2x"></i>
        </div>
        <div class="option" id="optionPaper">
          <i class="far fa-hand-paper fa-2x"></i>
        </div>
        <div class="option" id="optionScissors">
          <i class="far fa-hand-scissors fa-2x"></i>
        </div>
      </div>
      <!-- showing ai selection after clicking -->
      <div class="grid display-area">
        <div class="display">
          <h3 id="afterUserChose">You chose:</h3>
          <div id="userChoiceArea">
          </div>
          <button type="button" id="confirmBtn">
            Fight !
          </button>
        </div>
        <div class="display">
          <div id="display">

          </div>
        </div>
      </div>
      <!-- collapsible instruction panel -->
      <div class="grid instruction">
        <div class="rules">
          <div class="container one">
            <div class="grid" id ="rock">
              <i class="far fa-hand-rock fa-2x"></i>
            </div>
            <div class="grid" id="paper">
              <i class="far fa-hand-paper fa-2x"></i>
            </div>
          </div>
          <div class="container two">
            <div class="grid" id="paper">
              <i class="far fa-hand-paper fa-2x"></i>
            </div>
            <div class="grid" id="scissors">
              <i class="far fa-hand-scissors fa-2x"></i>
            </div>
          </div>
          <div class="container three">
            <div class="grid" id="scissors">
              <i class="far fa-hand-scissors fa-2x"></i>
            </div>
            <div class="grid" id ="rock">
              <i class="far fa-hand-rock fa-2x"></i>
            </div>
          </div>

        </div>
      </div>
    </main>

  <script>
  // After a button is clicked, place the choice onto userChoiceArea
  const btns = document.querySelectorAll('.option');
  const confirmBtn = document.getElementById('confirmBtn');

  const userChoiceArea = document.getElementById('userChoiceArea');
  const wordsAfterChosen = document.getElementById('afterUserChose');

  const aiDisplayArea = document.getElementById('display');
  const optionArr = [
    '<i class="far fa-hand-rock fa-5x" id="rock"></i>',
    '<i class="far fa-hand-paper fa-5x" id="paper"></i>',
    '<i class="far fa-hand-scissors fa-5x" id="scissors"></i>'
  ];
  let counter = 0;

  let userResult, aiResult;

  btns.forEach(btn=>btn.addEventListener('click', function(e){

    userChoiceArea.innerHTML= '';

    let chosenBtn = this.cloneNode(true);
    chosenBtn.classList.add('chosen');
    userChoiceArea.appendChild(chosenBtn);

    afterUserChose.style.display = 'block';
    confirmBtn.style.display = 'block';

    userResult = this.getAttribute('id').split('option')[1].toLowerCase();

  }));


  confirmBtn.addEventListener('click',function(e){
    selecting();
  });

  function selecting(){
    const intervalId = setInterval(function(){
      if(counter > 2){ counter = 0; }
      let aiOption = optionArr[counter];
      aiDisplayArea.innerHTML = aiOption;
      counter++;
    },100);

    let timeBase = Math.ceil(Math.random()*4000);
    let time = parseInt(timeBase);
    setTimeout(function(){
      clearInterval(intervalId);
      setTimeout(function(){
        aiResult = aiDisplayArea.children[0].getAttribute('id');
        console.log(aiResult);
      },10);
    },time);

  }

  </script>
  </body>
</html>
